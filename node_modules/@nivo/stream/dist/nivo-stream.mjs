import{useCallback as e,createElement as o,useState as r,useMemo as t,forwardRef as i,Fragment as n}from"react";import{useMotionConfig as l,useAnimatedPath as a,useCurveInterpolation as d,stackOffsetFromProp as c,stackOrderFromProp as s,usePropertyAccessor as u,useValueFormatter as f,Container as h,useDimensions as p,bindDefs as v,SvgWrapper as m,ResponsiveWrapper as g}from"@nivo/core";import{Grid as y,Axes as b}from"@nivo/axes";import{BoxLegendSvg as x}from"@nivo/legends";import{useSpring as C,animated as B}from"@react-spring/web";import{useTooltip as W,BasicTooltip as k,Chip as S,TableTooltip as w}from"@nivo/tooltip";import{jsx as z,Fragment as T,jsxs as O}from"react/jsx-runtime";import{area as I,stack as D}from"d3-shape";import{useTheme as L}from"@nivo/theming";import{useOrdinalColorScale as M,useInheritedColor as R}from"@nivo/colors";import{createPointScale as F,createLinearScale as G}from"@nivo/scales";function H(){return H=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},H.apply(null,arguments)}function P(e,o){if(null==e)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(-1!==o.indexOf(t))continue;r[t]=e[t]}return r}var E=function(r){var t=r.layer,i=r.fillOpacity,n=r.borderWidth,d=r.getBorderColor,c=r.isInteractive,s=r.tooltip,u=W(),f=u.showTooltipFromEvent,h=u.hideTooltip,p=e((function(e){f(o(s,{layer:t}),e,"left")}),[f,s,t]),v=l(),m=v.animate,g=v.config,y=a(t.path),b=C({color:t.color,config:g,immediate:!m});return z(B.path,{d:y,fill:t.fill?t.fill:b.color,fillOpacity:i,stroke:d(t),strokeWidth:n,onMouseMove:c?p:void 0,onMouseEnter:c?p:void 0,onMouseLeave:c?h:void 0})},j=function(e){var o=e.layers,r=e.fillOpacity,t=e.borderWidth,i=e.getBorderColor,n=e.isInteractive,l=e.tooltip;return z("g",{children:o.map((function(e,o){return z(E,{layer:e,getBorderColor:i,borderWidth:t,fillOpacity:r,isInteractive:n,tooltip:l},o)}))})},X=function(e,o){var r=e.y2;return"center"===o?r=e.y1+(e.y2-e.y1)/2:"start"===o&&(r=e.y1),r},Y=function(e){var r=e.data,t=e.dotComponent,i=e.position,n=e.getSize,l=e.getColor,a=e.getBorderWidth,d=e.getBorderColor;return z(T,{children:r.map((function(e,r){return o(t,{key:r,datum:e,x:e.x,y:X(e,i),size:n(e),color:l(e),borderWidth:a(e),borderColor:d(e)})}))})},A=function(t){var i=t.slice,n=t.height,l=t.tooltip,a=r(!1),d=a[0],c=a[1],s=W(),u=s.showTooltipFromEvent,f=s.hideTooltip,h=e((function(e){c(!0),u(o(l,{slice:i}),e,"left")}),[c,u,l,i]),p=e((function(){c(!1),f()}),[c,f]);return O("g",{transform:"translate("+i.x+", 0)",children:[d&&z("line",{x1:0,x2:0,y1:0,y2:n,stroke:"#000",strokeOpacity:.35,strokeWidth:1}),z("rect",{x:-20,width:40,height:n,fill:"#000",fillOpacity:0,onMouseEnter:h,onMouseMove:h,onMouseLeave:p})]})},V=function(e){var o=e.slices,r=e.height,t=e.tooltip;return z("g",{children:o.map((function(e){return z(A,{slice:e,height:r,tooltip:t},e.index)}))})},q={label:"id",order:"none",offsetType:"wiggle",curve:"catmullRom",axisTop:null,axisRight:null,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,colors:{scheme:"nivo"},fillOpacity:1,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableDots:!1,dotPosition:"center",dotComponent:function(e){var o=e.x,r=e.y,t=e.size,i=e.color,n=e.borderWidth,a=e.borderColor,d=l(),c=d.animate,s=d.config,u=C({x:o,y:r,radius:.5*t,color:i,config:s,immediate:!c});return z(B.circle,{cx:u.x,cy:u.y,r:u.radius,fill:u.color,strokeWidth:n,stroke:a})},dotSize:6,dotColor:{from:"color"},dotBorderWidth:0,dotBorderColor:{from:"color"},isInteractive:!0,tooltip:function(e){var o=e.layer;return z(k,{id:o.label,enableChip:!0,color:o.color})},enableStackTooltip:!0,stackTooltip:function(e){var o=e.slice,r=t((function(){return o.stack.map((function(e){return[z(S,{color:e.color},e.layerId),e.layerLabel,e.formattedValue]}))}),[o]);return z(w,{rows:r})},legends:[],legendLabel:"id",role:"application"},J=H({},q,{layers:["grid","axes","layers","dots","slices","legends"],defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),K=["isInteractive","animate","motionConfig","theme","renderWrapper"],N=function(e){var r=e.data,i=e.keys,l=e.label,a=e.valueFormat,h=e.offsetType,g=e.order,C=e.curve,B=e.layers,W=void 0===B?J.layers:B,k=e.width,S=e.height,w=e.margin,T=e.axisTop,O=e.axisRight,P=e.axisBottom,E=void 0===P?J.axisBottom:P,X=e.axisLeft,A=void 0===X?J.axisLeft:X,K=e.enableGridX,N=void 0===K?J.enableGridX:K,Q=e.enableGridY,U=void 0===Q?J.enableGridY:Q,Z=e.colors,$=e.fillOpacity,_=void 0===$?J.fillOpacity:$,ee=e.borderWidth,oe=void 0===ee?J.borderWidth:ee,re=e.borderColor,te=e.defs,ie=void 0===te?J.defs:te,ne=e.fill,le=void 0===ne?J.fill:ne,ae=e.enableDots,de=void 0===ae?J.enableDots:ae,ce=e.dotPosition,se=void 0===ce?J.dotPosition:ce,ue=e.dotComponent,fe=void 0===ue?J.dotComponent:ue,he=e.dotSize,pe=e.dotColor,ve=e.dotBorderWidth,me=e.dotBorderColor,ge=e.isInteractive,ye=void 0===ge?J.isInteractive:ge,be=e.tooltip,xe=void 0===be?J.tooltip:be,Ce=e.enableStackTooltip,Be=void 0===Ce?J.enableStackTooltip:Ce,We=e.stackTooltip,ke=void 0===We?J.stackTooltip:We,Se=e.legends,we=void 0===Se?J.legends:Se,ze=e.role,Te=e.ariaLabel,Oe=e.ariaLabelledBy,Ie=e.ariaDescribedBy,De=e.forwardedRef,Le=p(k,S,w),Me=Le.margin,Re=Le.innerWidth,Fe=Le.innerHeight,Ge=Le.outerWidth,He=Le.outerHeight,Pe=function(e){var o=e.width,r=e.height,i=e.data,n=e.keys,l=e.label,a=void 0===l?q.label:l,h=e.valueFormat,p=e.offsetType,v=void 0===p?q.offsetType:p,m=e.order,g=void 0===m?q.order:m,y=e.curve,b=void 0===y?q.curve:y,x=e.colors,C=void 0===x?q.colors:x,B=e.borderColor,W=void 0===B?q.borderColor:B,k=e.dotSize,S=void 0===k?q.dotSize:k,w=e.dotColor,z=void 0===w?q.dotColor:w,T=e.dotBorderWidth,O=void 0===T?q.dotBorderWidth:T,P=e.dotBorderColor,E=void 0===P?q.dotBorderColor:P,j=d(b),X=t((function(){return I().x((function(e){return e.x})).y0((function(e){return e.y1})).y1((function(e){return e.y2})).curve(j)}),[j]),Y=t((function(){return D().keys(n).offset(c(v)).order(s(g))}),[n,v,g]),A=t((function(){var e=[],t=[],n=Y(i).map((function(o){return o.map((function(r){return e.push(r[0]),t.push(r[1]),H({},r,{value:r.data[o.key]})}))})),l=Math.min.apply(Math,e),a=Math.max.apply(Math,t);return[n,F({type:"point"},{all:Array.from({length:i.length},(function(e,o){return o})),min:0,max:i.length},o),G({type:"linear",min:l},{all:[l,a],min:l,max:a},r,"y")]}),[Y,i,o,r]),V=A[0],J=A[1],K=A[2],N=L(),Q=M(C,"id"),U=R(W,N),Z=t((function(){return"function"==typeof S?S:function(){return S}}),[S]),$=R(z,N),_=t((function(){return"function"==typeof O?O:function(){return O}}),[O]),ee=R(E,N),oe=u(a),re=f(h),te=t((function(){return V.map((function(e,o){var r=e.map((function(e,r){return{layerId:n[o],layerLabel:"",index:r,color:"",x:J(r),value:e.value,formattedValue:re(e.value),y1:K(e[0]),y2:K(e[1])}})),t={id:n[o],path:X(r)},i=H({},t,{label:oe(t),color:Q(t)});return H({},i,{data:r.map((function(e){return e.layerLabel=i.label,e.color=i.color,e}))})}))}),[V,n,oe,X,Q,J,K,re]),ie=t((function(){return Array.from({length:i.length},(function(e,o){var r=te.map((function(e){return e.data[o]})).sort((function(e,o){return e.y2-o.y2}));return{index:o,x:te[0].data[o].x,stack:r}}))}),[i.length,te]),ne=t((function(){return{xScale:J,yScale:K,layers:te,slices:ie}}),[J,K,te,ie]);return{xScale:J,yScale:K,layers:te,slices:ie,getBorderColor:U,getDotSize:Z,getDotColor:$,getDotBorderWidth:_,getDotBorderColor:ee,layerContext:ne}}({width:Re,height:Fe,data:r,keys:i,label:l,valueFormat:a,offsetType:h,order:g,curve:C,colors:Z,borderColor:re,dotSize:he,dotColor:pe,dotBorderWidth:ve,dotBorderColor:me}),Ee=Pe.xScale,je=Pe.yScale,Xe=Pe.layers,Ye=Pe.slices,Ae=Pe.getBorderColor,Ve=Pe.getDotSize,qe=Pe.getDotColor,Je=Pe.getDotBorderWidth,Ke=Pe.getDotBorderColor,Ne=Pe.layerContext,Qe=v(ie,Xe,le),Ue={grid:null,axes:null,layers:null,dots:null,slices:null,legends:null};return W.includes("grid")&&(Ue.grid=z(y,{width:Re,height:Fe,xScale:N?Ee:null,yScale:U?je:null},"grid")),W.includes("axes")&&(Ue.axes=z(b,{xScale:Ee,yScale:je,width:Re,height:Fe,top:T,right:O,bottom:E,left:A},"axes")),W.includes("layers")&&(Ue.layers=z(j,{layers:Xe,fillOpacity:_,borderWidth:oe,getBorderColor:Ae,isInteractive:ye,tooltip:xe},"layers")),W.includes("dots")&&de&&(Ue.dots=z(n,{children:Xe.map((function(e){return z(Y,{id:e.id,color:e.color,data:e.data,dotComponent:fe,position:se,getSize:Ve,getColor:qe,getBorderWidth:Je,getBorderColor:Ke},e.id)}))},"dots")),W.includes("slices")&&ye&&Be&&(Ue.slices=z(V,{slices:Ye,height:Fe,tooltip:ke},"slices")),W.includes("legends")&&(Ue.legends=z(n,{children:we.map((function(e,o){var r=Xe.map((function(e){return{id:e.id,label:e.label,color:e.color,fill:e.fill}})).reverse();return z(x,H({},e,{containerWidth:Re,containerHeight:Fe,data:r}),o)}))},"legends")),z(m,{width:Ge,height:He,margin:Me,defs:Qe,role:ze,ariaLabel:Te,ariaLabelledBy:Oe,ariaDescribedBy:Ie,ref:De,children:W.map((function(e,r){var t;return"function"==typeof e?z(n,{children:o(e,Ne)},r):null!=(t=null==Ue?void 0:Ue[e])?t:null}))})},Q=i((function(e,o){var r=e.isInteractive,t=void 0===r?J.isInteractive:r,i=e.animate,n=void 0===i?J.animate:i,l=e.motionConfig,a=void 0===l?J.motionConfig:l,d=e.theme,c=e.renderWrapper,s=P(e,K);return z(h,{animate:n,isInteractive:t,motionConfig:a,renderWrapper:c,theme:d,children:z(N,H({},s,{isInteractive:t,forwardedRef:o}))})})),U=["defaultWidth","defaultHeight","onResize","debounceResize"],Z=i((function(e,o){var r=e.defaultWidth,t=e.defaultHeight,i=e.onResize,n=e.debounceResize,l=P(e,U);return z(g,{defaultWidth:r,defaultHeight:t,onResize:i,debounceResize:n,children:function(e){var r=e.width,t=e.height;return z(Q,H({},l,{width:r,height:t,ref:o}))}})}));export{Z as ResponsiveStream,Q as Stream,q as defaultProps,J as svgDefaultProps};
//# sourceMappingURL=nivo-stream.mjs.map
