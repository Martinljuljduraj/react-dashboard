import {
  V,
  Y,
  _,
  j
} from "./chunk-BCWZNGYK.js";
import {
  $r,
  $t,
  Dr,
  E,
  E2,
  Fr,
  It,
  Kt,
  Mn,
  Rt,
  T,
  Tt,
  Ye,
  animated,
  area_default,
  bn,
  cn,
  hn,
  pr,
  stack_default,
  useSpring,
  w,
  z,
  z2
} from "./chunk-WSFUSJIY.js";
import {
  require_jsx_runtime
} from "./chunk-JNNNAK6O.js";
import "./chunk-A7ECLLTJ.js";
import {
  require_react
} from "./chunk-HSUUC2QV.js";
import {
  __toESM
} from "./chunk-DC5AMYBS.js";

// node_modules/@nivo/stream/dist/nivo-stream.mjs
var import_react = __toESM(require_react(), 1);
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
function H() {
  return H = Object.assign ? Object.assign.bind() : function(e2) {
    for (var o2 = 1; o2 < arguments.length; o2++) {
      var r2 = arguments[o2];
      for (var t2 in r2) ({}).hasOwnProperty.call(r2, t2) && (e2[t2] = r2[t2]);
    }
    return e2;
  }, H.apply(null, arguments);
}
function P(e2, o2) {
  if (null == e2) return {};
  var r2 = {};
  for (var t2 in e2) if ({}.hasOwnProperty.call(e2, t2)) {
    if (-1 !== o2.indexOf(t2)) continue;
    r2[t2] = e2[t2];
  }
  return r2;
}
var E3 = function(r2) {
  var t2 = r2.layer, i2 = r2.fillOpacity, n2 = r2.borderWidth, d = r2.getBorderColor, c = r2.isInteractive, s = r2.tooltip, u = z2(), f = u.showTooltipFromEvent, h = u.hideTooltip, p = (0, import_react.useCallback)(function(e2) {
    f((0, import_react.createElement)(s, { layer: t2 }), e2, "left");
  }, [f, s, t2]), v = Dr(), m = v.animate, g = v.config, y = It(t2.path), b = useSpring({ color: t2.color, config: g, immediate: !m });
  return (0, import_jsx_runtime.jsx)(animated.path, { d: y, fill: t2.fill ? t2.fill : b.color, fillOpacity: i2, stroke: d(t2), strokeWidth: n2, onMouseMove: c ? p : void 0, onMouseEnter: c ? p : void 0, onMouseLeave: c ? h : void 0 });
};
var j2 = function(e2) {
  var o2 = e2.layers, r2 = e2.fillOpacity, t2 = e2.borderWidth, i2 = e2.getBorderColor, n2 = e2.isInteractive, l = e2.tooltip;
  return (0, import_jsx_runtime.jsx)("g", { children: o2.map(function(e3, o3) {
    return (0, import_jsx_runtime.jsx)(E3, { layer: e3, getBorderColor: i2, borderWidth: t2, fillOpacity: r2, isInteractive: n2, tooltip: l }, o3);
  }) });
};
var X = function(e2, o2) {
  var r2 = e2.y2;
  return "center" === o2 ? r2 = e2.y1 + (e2.y2 - e2.y1) / 2 : "start" === o2 && (r2 = e2.y1), r2;
};
var Y2 = function(e2) {
  var r2 = e2.data, t2 = e2.dotComponent, i2 = e2.position, n2 = e2.getSize, l = e2.getColor, a = e2.getBorderWidth, d = e2.getBorderColor;
  return (0, import_jsx_runtime.jsx)(import_jsx_runtime.Fragment, { children: r2.map(function(e3, r3) {
    return (0, import_react.createElement)(t2, { key: r3, datum: e3, x: e3.x, y: X(e3, i2), size: n2(e3), color: l(e3), borderWidth: a(e3), borderColor: d(e3) });
  }) });
};
var A = function(t2) {
  var i2 = t2.slice, n2 = t2.height, l = t2.tooltip, a = (0, import_react.useState)(false), d = a[0], c = a[1], s = z2(), u = s.showTooltipFromEvent, f = s.hideTooltip, h = (0, import_react.useCallback)(function(e2) {
    c(true), u((0, import_react.createElement)(l, { slice: i2 }), e2, "left");
  }, [c, u, l, i2]), p = (0, import_react.useCallback)(function() {
    c(false), f();
  }, [c, f]);
  return (0, import_jsx_runtime.jsxs)("g", { transform: "translate(" + i2.x + ", 0)", children: [d && (0, import_jsx_runtime.jsx)("line", { x1: 0, x2: 0, y1: 0, y2: n2, stroke: "#000", strokeOpacity: 0.35, strokeWidth: 1 }), (0, import_jsx_runtime.jsx)("rect", { x: -20, width: 40, height: n2, fill: "#000", fillOpacity: 0, onMouseEnter: h, onMouseMove: h, onMouseLeave: p })] });
};
var V2 = function(e2) {
  var o2 = e2.slices, r2 = e2.height, t2 = e2.tooltip;
  return (0, import_jsx_runtime.jsx)("g", { children: o2.map(function(e3) {
    return (0, import_jsx_runtime.jsx)(A, { slice: e3, height: r2, tooltip: t2 }, e3.index);
  }) });
};
var q = { label: "id", order: "none", offsetType: "wiggle", curve: "catmullRom", axisTop: null, axisRight: null, axisBottom: {}, axisLeft: {}, enableGridX: false, enableGridY: true, colors: { scheme: "nivo" }, fillOpacity: 1, borderWidth: 0, borderColor: { from: "color", modifiers: [["darker", 1]] }, enableDots: false, dotPosition: "center", dotComponent: function(e2) {
  var o2 = e2.x, r2 = e2.y, t2 = e2.size, i2 = e2.color, n2 = e2.borderWidth, a = e2.borderColor, d = Dr(), c = d.animate, s = d.config, u = useSpring({ x: o2, y: r2, radius: 0.5 * t2, color: i2, config: s, immediate: !c });
  return (0, import_jsx_runtime.jsx)(animated.circle, { cx: u.x, cy: u.y, r: u.radius, fill: u.color, strokeWidth: n2, stroke: a });
}, dotSize: 6, dotColor: { from: "color" }, dotBorderWidth: 0, dotBorderColor: { from: "color" }, isInteractive: true, tooltip: function(e2) {
  var o2 = e2.layer;
  return (0, import_jsx_runtime.jsx)(T, { id: o2.label, enableChip: true, color: o2.color });
}, enableStackTooltip: true, stackTooltip: function(e2) {
  var o2 = e2.slice, r2 = (0, import_react.useMemo)(function() {
    return o2.stack.map(function(e3) {
      return [(0, import_jsx_runtime.jsx)(w, { color: e3.color }, e3.layerId), e3.layerLabel, e3.formattedValue];
    });
  }, [o2]);
  return (0, import_jsx_runtime.jsx)(E, { rows: r2 });
}, legends: [], legendLabel: "id", role: "application" };
var J = H({}, q, { layers: ["grid", "axes", "layers", "dots", "slices", "legends"], defs: [], fill: [], animate: true, motionConfig: "default", role: "img", isFocusable: false });
var K = ["isInteractive", "animate", "motionConfig", "theme", "renderWrapper"];
var N = function(e2) {
  var r2 = e2.data, i2 = e2.keys, l = e2.label, a = e2.valueFormat, h = e2.offsetType, g = e2.order, C = e2.curve, B = e2.layers, W = void 0 === B ? J.layers : B, k = e2.width, S = e2.height, w2 = e2.margin, T3 = e2.axisTop, O2 = e2.axisRight, P2 = e2.axisBottom, E4 = void 0 === P2 ? J.axisBottom : P2, X2 = e2.axisLeft, A2 = void 0 === X2 ? J.axisLeft : X2, K2 = e2.enableGridX, N2 = void 0 === K2 ? J.enableGridX : K2, Q2 = e2.enableGridY, U2 = void 0 === Q2 ? J.enableGridY : Q2, Z2 = e2.colors, $ = e2.fillOpacity, _2 = void 0 === $ ? J.fillOpacity : $, ee = e2.borderWidth, oe = void 0 === ee ? J.borderWidth : ee, re = e2.borderColor, te = e2.defs, ie = void 0 === te ? J.defs : te, ne = e2.fill, le = void 0 === ne ? J.fill : ne, ae = e2.enableDots, de = void 0 === ae ? J.enableDots : ae, ce = e2.dotPosition, se = void 0 === ce ? J.dotPosition : ce, ue = e2.dotComponent, fe = void 0 === ue ? J.dotComponent : ue, he = e2.dotSize, pe = e2.dotColor, ve = e2.dotBorderWidth, me = e2.dotBorderColor, ge = e2.isInteractive, ye = void 0 === ge ? J.isInteractive : ge, be = e2.tooltip, xe = void 0 === be ? J.tooltip : be, Ce = e2.enableStackTooltip, Be = void 0 === Ce ? J.enableStackTooltip : Ce, We = e2.stackTooltip, ke = void 0 === We ? J.stackTooltip : We, Se = e2.legends, we = void 0 === Se ? J.legends : Se, ze = e2.role, Te = e2.ariaLabel, Oe = e2.ariaLabelledBy, Ie = e2.ariaDescribedBy, De = e2.forwardedRef, Le = cn(k, S, w2), Me = Le.margin, Re = Le.innerWidth, Fe = Le.innerHeight, Ge = Le.outerWidth, He = Le.outerHeight, Pe = function(e3) {
    var o2 = e3.width, r3 = e3.height, i3 = e3.data, n2 = e3.keys, l2 = e3.label, a2 = void 0 === l2 ? q.label : l2, h2 = e3.valueFormat, p = e3.offsetType, v = void 0 === p ? q.offsetType : p, m = e3.order, g2 = void 0 === m ? q.order : m, y = e3.curve, b = void 0 === y ? q.curve : y, x = e3.colors, C2 = void 0 === x ? q.colors : x, B2 = e3.borderColor, W2 = void 0 === B2 ? q.borderColor : B2, k2 = e3.dotSize, S2 = void 0 === k2 ? q.dotSize : k2, w3 = e3.dotColor, z4 = void 0 === w3 ? q.dotColor : w3, T4 = e3.dotBorderWidth, O3 = void 0 === T4 ? q.dotBorderWidth : T4, P3 = e3.dotBorderColor, E5 = void 0 === P3 ? q.dotBorderColor : P3, j3 = $t(b), X3 = (0, import_react.useMemo)(function() {
      return area_default().x(function(e4) {
        return e4.x;
      }).y0(function(e4) {
        return e4.y1;
      }).y1(function(e4) {
        return e4.y2;
      }).curve(j3);
    }, [j3]), Y3 = (0, import_react.useMemo)(function() {
      return stack_default().keys(n2).offset(Kt(v)).order(Tt(g2));
    }, [n2, v, g2]), A3 = (0, import_react.useMemo)(function() {
      var e4 = [], t2 = [], n3 = Y3(i3).map(function(o3) {
        return o3.map(function(r4) {
          return e4.push(r4[0]), t2.push(r4[1]), H({}, r4, { value: r4.data[o3.key] });
        });
      }), l3 = Math.min.apply(Math, e4), a3 = Math.max.apply(Math, t2);
      return [n3, _({ type: "point" }, { all: Array.from({ length: i3.length }, function(e5, o3) {
        return o3;
      }), min: 0, max: i3.length }, o2), Y({ type: "linear", min: l3 }, { all: [l3, a3], min: l3, max: a3 }, r3, "y")];
    }, [Y3, i3, o2, r3]), V3 = A3[0], J2 = A3[1], K3 = A3[2], N3 = z(), Q3 = pr(C2, "id"), U3 = Ye(W2, N3), Z3 = (0, import_react.useMemo)(function() {
      return "function" == typeof S2 ? S2 : function() {
        return S2;
      };
    }, [S2]), $2 = Ye(z4, N3), _3 = (0, import_react.useMemo)(function() {
      return "function" == typeof O3 ? O3 : function() {
        return O3;
      };
    }, [O3]), ee2 = Ye(E5, N3), oe2 = bn(a2), re2 = hn(h2), te2 = (0, import_react.useMemo)(function() {
      return V3.map(function(e4, o3) {
        var r4 = e4.map(function(e5, r5) {
          return { layerId: n2[o3], layerLabel: "", index: r5, color: "", x: J2(r5), value: e5.value, formattedValue: re2(e5.value), y1: K3(e5[0]), y2: K3(e5[1]) };
        }), t2 = { id: n2[o3], path: X3(r4) }, i4 = H({}, t2, { label: oe2(t2), color: Q3(t2) });
        return H({}, i4, { data: r4.map(function(e5) {
          return e5.layerLabel = i4.label, e5.color = i4.color, e5;
        }) });
      });
    }, [V3, n2, oe2, X3, Q3, J2, K3, re2]), ie2 = (0, import_react.useMemo)(function() {
      return Array.from({ length: i3.length }, function(e4, o3) {
        var r4 = te2.map(function(e5) {
          return e5.data[o3];
        }).sort(function(e5, o4) {
          return e5.y2 - o4.y2;
        });
        return { index: o3, x: te2[0].data[o3].x, stack: r4 };
      });
    }, [i3.length, te2]), ne2 = (0, import_react.useMemo)(function() {
      return { xScale: J2, yScale: K3, layers: te2, slices: ie2 };
    }, [J2, K3, te2, ie2]);
    return { xScale: J2, yScale: K3, layers: te2, slices: ie2, getBorderColor: U3, getDotSize: Z3, getDotColor: $2, getDotBorderWidth: _3, getDotBorderColor: ee2, layerContext: ne2 };
  }({ width: Re, height: Fe, data: r2, keys: i2, label: l, valueFormat: a, offsetType: h, order: g, curve: C, colors: Z2, borderColor: re, dotSize: he, dotColor: pe, dotBorderWidth: ve, dotBorderColor: me }), Ee = Pe.xScale, je = Pe.yScale, Xe = Pe.layers, Ye2 = Pe.slices, Ae = Pe.getBorderColor, Ve = Pe.getDotSize, qe = Pe.getDotColor, Je = Pe.getDotBorderWidth, Ke = Pe.getDotBorderColor, Ne = Pe.layerContext, Qe = Mn(ie, Xe, le), Ue = { grid: null, axes: null, layers: null, dots: null, slices: null, legends: null };
  return W.includes("grid") && (Ue.grid = (0, import_jsx_runtime.jsx)(j, { width: Re, height: Fe, xScale: N2 ? Ee : null, yScale: U2 ? je : null }, "grid")), W.includes("axes") && (Ue.axes = (0, import_jsx_runtime.jsx)(V, { xScale: Ee, yScale: je, width: Re, height: Fe, top: T3, right: O2, bottom: E4, left: A2 }, "axes")), W.includes("layers") && (Ue.layers = (0, import_jsx_runtime.jsx)(j2, { layers: Xe, fillOpacity: _2, borderWidth: oe, getBorderColor: Ae, isInteractive: ye, tooltip: xe }, "layers")), W.includes("dots") && de && (Ue.dots = (0, import_jsx_runtime.jsx)(import_react.Fragment, { children: Xe.map(function(e3) {
    return (0, import_jsx_runtime.jsx)(Y2, { id: e3.id, color: e3.color, data: e3.data, dotComponent: fe, position: se, getSize: Ve, getColor: qe, getBorderWidth: Je, getBorderColor: Ke }, e3.id);
  }) }, "dots")), W.includes("slices") && ye && Be && (Ue.slices = (0, import_jsx_runtime.jsx)(V2, { slices: Ye2, height: Fe, tooltip: ke }, "slices")), W.includes("legends") && (Ue.legends = (0, import_jsx_runtime.jsx)(import_react.Fragment, { children: we.map(function(e3, o2) {
    var r3 = Xe.map(function(e4) {
      return { id: e4.id, label: e4.label, color: e4.color, fill: e4.fill };
    }).reverse();
    return (0, import_jsx_runtime.jsx)(E2, H({}, e3, { containerWidth: Re, containerHeight: Fe, data: r3 }), o2);
  }) }, "legends")), (0, import_jsx_runtime.jsx)(Rt, { width: Ge, height: He, margin: Me, defs: Qe, role: ze, ariaLabel: Te, ariaLabelledBy: Oe, ariaDescribedBy: Ie, ref: De, children: W.map(function(e3, r3) {
    var t2;
    return "function" == typeof e3 ? (0, import_jsx_runtime.jsx)(import_react.Fragment, { children: (0, import_react.createElement)(e3, Ne) }, r3) : null != (t2 = null == Ue ? void 0 : Ue[e3]) ? t2 : null;
  }) });
};
var Q = (0, import_react.forwardRef)(function(e2, o2) {
  var r2 = e2.isInteractive, t2 = void 0 === r2 ? J.isInteractive : r2, i2 = e2.animate, n2 = void 0 === i2 ? J.animate : i2, l = e2.motionConfig, a = void 0 === l ? J.motionConfig : l, d = e2.theme, c = e2.renderWrapper, s = P(e2, K);
  return (0, import_jsx_runtime.jsx)(Fr, { animate: n2, isInteractive: t2, motionConfig: a, renderWrapper: c, theme: d, children: (0, import_jsx_runtime.jsx)(N, H({}, s, { isInteractive: t2, forwardedRef: o2 })) });
});
var U = ["defaultWidth", "defaultHeight", "onResize", "debounceResize"];
var Z = (0, import_react.forwardRef)(function(e2, o2) {
  var r2 = e2.defaultWidth, t2 = e2.defaultHeight, i2 = e2.onResize, n2 = e2.debounceResize, l = P(e2, U);
  return (0, import_jsx_runtime.jsx)($r, { defaultWidth: r2, defaultHeight: t2, onResize: i2, debounceResize: n2, children: function(e3) {
    var r3 = e3.width, t3 = e3.height;
    return (0, import_jsx_runtime.jsx)(Q, H({}, l, { width: r3, height: t3, ref: o2 }));
  } });
});
export {
  Z as ResponsiveStream,
  Q as Stream,
  q as defaultProps,
  J as svgDefaultProps
};
//# sourceMappingURL=@nivo_stream.js.map
